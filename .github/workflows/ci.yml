name: Video Converter - CI

on:
  push:
    paths:
      - 'frontend/**'
      - 'backend/**'
      - 'Dockerfile'
      - 'docker-compose.yml'
      - 'docker-compose.dev.yml'
      - '.dockerignore'
      - 'tests/**'
      - '.github/workflows/ci.yml'
      - '.github/workflows/build-jobs.yml'
      - '.github/workflows/smoke-tests.yml'

permissions:
  contents: read
  packages: write

jobs:
  build:
    name: Lint, Test & Build Docker
    uses: ./.github/workflows/build-jobs.yml
    with:
      build_docker: true
      push_docker: false

  smoke-tests:
    name: Smoke Tests
    needs: build
    uses: ./.github/workflows/smoke-tests.yml
